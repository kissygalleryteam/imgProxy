<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>ImgProxy的demo</title>
    <script src="http://g.tbcdn.cn/kissy/k/1.3.0/kissy-min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="http://g.tbcdn.cn/kissy/k/1.3.0/css/dpl/base-min.css">
</head>
<body>
<h2>ImgProxy的demo</h2>
<img class="J_sampleImg" src="" alt="这里会显示base64编码的图片" />

<script>
    var S = KISSY;
    if (S.Config.debug) {
        var srcPath = "../../";
        S.config({
            packages:[
                {
                    name:"gallery/imgProxy",
                    path:srcPath,
                    charset:"utf-8",
                    ignorePackageNameInUri:true
                }
            ]
        });
    }

    S.use('gallery/imgProxy/1.0/index', function (S, ImgProxy) {
         var url = "http://img04.taobaocdn.com/bao/uploaded/i4/T1fQpaXtBXXXb1upjX.jpg";
         imgproxy.load(url,
             function(imgBase64) {
                console.log(imgBase64);
                S.get(".J_sampleImg").src = imgBase64;
             },
             function(msg) {
                 console.log("fail to load img: " + msg);
             }
         );
    })
</script>
</body>
</html>
